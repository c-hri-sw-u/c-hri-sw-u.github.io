<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground - Chris W</title>

    <link rel="stylesheet" href="./navigater.css">
    <link rel="stylesheet" href="./workTemplate.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Quicksand:wght@300..700&family=Shrikhand&display=swap" rel="stylesheet">

    <!-- 加载Paper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.17/paper-full.min.js"></script>
    
    <!-- 确保workIcons.js中包含createShape函数 -->
    <script src="workIcons.js"></script>
    
    <!-- 加载playground数据 -->
    <script src="playground.js"></script>
    
    <script type="text/javascript">
        // 全局安装Paper.js
        paper.install(window);
        
        // 等待页面加载完成
        window.onload = function() {
            // 初始化Paper.js
            paper.setup();
            // 生成列表
            generatePlaygroundList();
            // 生成项目内容
            generatePlaygroundContent();
        }
    </script>
    
    <style>
        @keyframes iconFlip {
            0% {
                transform: rotateY(0deg);
            }
            100% {
                transform: rotateY(360deg);
            }
        }
        
        .list-item-icon.active-icon {
            animation: iconFlip 2.5s linear infinite;
            transform-style: preserve-3d;
        }
        
        .list-item-icon {
            perspective: 1000px;
            transform-style: preserve-3d;
            backface-visibility: visible;
        }

        .project-divider {
            height: 1px;
            background-color: #ddd;
            margin: 80px 0;
            width: 100%;
        }

        .project-container {
            margin-bottom: 80px;
            scroll-margin-top: 100px; /* 为锚点导航提供顶部边距 */
        }
    </style>
</head>

<body>

    <section id="navigater">
        <div class="container">
            <div class="navigater-title left" id="fullmap">
                <a class="eng">FullMap</a>
            </div>
            <div class="navigater-title middle" id="back">
                <a class="eng">Go Back</a>
                <svg style="margin-left: 4px;" height="12px" width="12px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 490.235 490.235" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <g> <path d="M6.2,240.573l213.1,176.3c5.1,4.2,12.2,5.1,18.2,2.3c6-2.8,9.8-8.9,9.8-15.5v-88.4c82.9,0.4,140.8,8.3,210.8,131.8 c3.1,5.5,8.9,8.7,14.9,8.7c1.5,0,2.9-0.2,4.4-0.6c7.5-2,12.8-8.8,12.8-16.6c0-3.4,0-7,0-10.7c0.2-46.6,0.6-117-31.8-176.9 c-37.2-68.9-108.2-106-211.1-110.6v-88.8c0-6.6-3.8-12.7-9.8-15.5s-13.1-1.9-18.2,2.3L6.2,214.073c-3.9,3.3-6.2,8.1-6.2,13.2 S2.2,237.273,6.2,240.573z M213.1,87.973v69.2c0,9.4,7.6,17.1,17,17.2c191,1.8,220.8,113.3,225.2,204.6 c-67.7-92.7-132.4-98-225-98l0,0c-4.5,0-8.9,1.8-12.1,5c-3.2,3.2-5,7.6-5,12.1v69.2l-169-139.9L213.1,87.973z"></path> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </g> </g></svg>            
            </div>
        </div>
    </section>

    <div id="wrapper">
        <section id="list">
            <div class="container">
                <div class="copyright" style="margin-bottom: 48px;">
                    <a class="eng">© 2025 <NAME>Chris W.</NAME></a>
                </div>
                <div class="list-container" id="playground-list">
                    <!-- 项目列表将通过JS动态加载 -->
                </div>
            </div>
        </section>
    
        <section id="work">
            <div class="container" id="projects-container">
                <!-- 项目内容将通过JS动态加载 -->
            </div>
            
            <div class="container">
                <div class="contact-info">
                    <div class="copyright">
                        <a class="eng">© <NAME>Chris W.</NAME></a>
                    </div>
                    <div class="contact">
                        <p>Instagram
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="instagram">@sexy.robot</span>
                        </p>
                        <p>X
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="x">@ch_ri_s</span>
                        </p>
                        <p>LinkedIn
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="linkedin">@Yixi(Chris) Wu</span>
                        </p>
                        <p>Rednote
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="red">@SLEEPNAKED</span>
                        </p>
                        <p>Email
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="email">cwu14932@gmail.com</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // 生成左侧项目列表
        function generatePlaygroundList() {
            const listContainer = document.getElementById('playground-list');
            let listHTML = '';

            listHTML += `
            <div class="stage-title">
                Playground
            </div>
            `;

            playgroundData.projects.forEach(project => {
                listHTML += `
                <div class="list-item" data-project-id="${project.id}" onclick="scrollToProject('${project.id}')">
                    <div class="list-item-icon">
                        <canvas width="24" height="24"></canvas>
                    </div>
                    <div class="list-item-title">
                        <a>${project.listTitle}</a>
                    </div>
                </div>
                `;
            });

            listContainer.innerHTML = listHTML;

            // 初始化所有项目图标
            playgroundData.projects.forEach(project => {
                if (project.icon) {
                    const listItem = document.querySelector(`[data-project-id="${project.id}"]`);
                    if (listItem) {
                        const canvas = listItem.querySelector('canvas');
                        
                        // 初始化Paper.js
                        const paperScope = new paper.PaperScope();
                        paperScope.setup(canvas);
                        
                        // 创建形状
                        const shape = createShape(project.icon.shape, project.icon.fill, project.icon.dashed, project.icon.skewed);
                        
                        // 移动形状到canvas中心
                        if (shape) {
                            shape.position = paperScope.view.center;
                        }
                        
                        // 确保绘制
                        paperScope.view.draw();
                    }
                }
            });
        }

        // 生成右侧项目内容
        function generatePlaygroundContent() {
            const projectsContainer = document.getElementById('projects-container');
            let contentHTML = '';

            playgroundData.projects.forEach((project, index) => {
                contentHTML += `
                <div id="${project.id}" class="project-container">
                    <div class="work-title" style="margin-bottom: 64px;">
                        <p id="main-title-${project.id}">${project.title}</p>
                        <p class="subtitle" id="sub-title-${project.id}">${project.subtitle}</p>
                    </div>

                    <div class="work-content">
                        ${project.content}
                    </div>
                    
                    <div class="work-intro">
                        <p class="work-type" id="work-type-${project.id}">${project.type}</p>
                        <p class="work-date" id="work-date-${project.id}">${project.date}</p>
                        <br>
                        <p class="work-purpose" id="work-purpose-${project.id}">${project.purpose}</p>
                        <p><br></p>
                        <p class="work-description" id="work-description-${project.id}">${project.description}</p>
                    </div>
                </div>
                `;

                // 在每个项目后添加分隔线，最后一个项目除外
                if (index < playgroundData.projects.length - 1) {
                    contentHTML += '<div class="project-divider"></div>';
                }
            });

            projectsContainer.innerHTML = contentHTML;
        }

        // 滚动到指定项目
        function scrollToProject(projectId) {
            const element = document.getElementById(projectId);
            if (element) {
                // 滚动到元素位置
                element.scrollIntoView({ behavior: 'smooth' });
                
                // 更新活动的图标样式
                updateActiveIcon(projectId);
            }
        }

        // 更新当前活动的图标
        function updateActiveIcon(projectId) {
            // 移除所有活动图标样式
            document.querySelectorAll('.list-item-icon').forEach(icon => {
                icon.classList.remove('active-icon');
            });
            
            // 添加当前活动图标样式
            const currentItem = document.querySelector(`[data-project-id="${projectId}"]`);
            if (currentItem) {
                const icon = currentItem.querySelector('.list-item-icon');
                icon.classList.add('active-icon');
            }
        }

        // 监听滚动事件，更新活动项目
        document.addEventListener('scroll', function() {
            const projectContainers = document.querySelectorAll('.project-container');
            let currentProject = null;
            
            // 找到当前在视口中最顶部的项目
            projectContainers.forEach(container => {
                const rect = container.getBoundingClientRect();
                if (rect.top <= 150 && rect.bottom >= 150) {
                    currentProject = container.id;
                }
            });
            
            if (currentProject) {
                updateActiveIcon(currentProject);
            }
        });

        // 导航按钮处理
        document.getElementById('fullmap').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
        
        document.getElementById('back').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    </script>

    <script src="hyperlink.js"></script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work</title>

    <link rel="stylesheet" href="./navigater.css">
    <link rel="stylesheet" href="./workTemplate.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Quicksand:wght@300..700&family=Shrikhand&display=swap" rel="stylesheet">


    
    <!-- 加载Paper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.17/paper-full.min.js"></script>
    
    <!-- 确保workIcons.js中包含createShape函数 -->
    <script src="workIcons.js"></script>
    
    <!-- 加载works数据 -->
    <script src="works.js"></script>
    
    <!-- 加载generateList函数 -->
    <script src="generateList.js"></script>
    
    <script type="text/javascript">
        // 全局安装Paper.js
        paper.install(window);
        
        // 等待页面加载完成
        window.onload = function() {
            // 初始化Paper.js
            paper.setup();
            // 生成列表
            if(typeof generateList === 'function') {
                generateList();
            }
        }
    </script>
    
    <style>
        @keyframes iconFlip {
            0% {
                transform: rotateY(0deg);
            }
            100% {
                transform: rotateY(360deg);
            }
        }
        
        .list-item-icon.current-icon {
            animation: iconFlip 2.5s linear infinite;
            transform-style: preserve-3d;
        }
        
        .list-item-icon {
            perspective: 1000px;
            transform-style: preserve-3d;
            backface-visibility: visible;
        }
    </style>
</head>

<body>

    <section id="navigater">
        <div class="container">
            <div class="navigater-title left" id="fullmap">
                <a class="eng">FullMap</a>
            </div>
            <div class="navigater-title middle" id="back">
                <a class="eng">Go Back</a>
                <svg style="margin-left: 4px;" height="12px" width="12px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 490.235 490.235" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <g> <path d="M6.2,240.573l213.1,176.3c5.1,4.2,12.2,5.1,18.2,2.3c6-2.8,9.8-8.9,9.8-15.5v-88.4c82.9,0.4,140.8,8.3,210.8,131.8 c3.1,5.5,8.9,8.7,14.9,8.7c1.5,0,2.9-0.2,4.4-0.6c7.5-2,12.8-8.8,12.8-16.6c0-3.4,0-7,0-10.7c0.2-46.6,0.6-117-31.8-176.9 c-37.2-68.9-108.2-106-211.1-110.6v-88.8c0-6.6-3.8-12.7-9.8-15.5s-13.1-1.9-18.2,2.3L6.2,214.073c-3.9,3.3-6.2,8.1-6.2,13.2 S2.2,237.273,6.2,240.573z M213.1,87.973v69.2c0,9.4,7.6,17.1,17,17.2c191,1.8,220.8,113.3,225.2,204.6 c-67.7-92.7-132.4-98-225-98l0,0c-4.5,0-8.9,1.8-12.1,5c-3.2,3.2-5,7.6-5,12.1v69.2l-169-139.9L213.1,87.973z"></path> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </g> </g></svg>            
            </div>
            <div class="navigater-title right" id="next">
                <a class="eng">Next</a>
                <svg style="margin-left: 4px;" height="12px" width="12px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 489.6 489.6" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <g> <path d="M0,244.8c0,9.5,7.7,17.2,17.2,17.2h414.2L322.9,370.4c-3.3,3.3-5,7.7-5,12.1s1.7,8.8,5,12.1c6.7,6.7,17.6,6.7,24.3,0 l137.6-137.7c6.4-6.4,6.4-17.8,0-24.3L347.1,95c-6.7-6.7-17.6-6.7-24.3,0c-6.7,6.7-6.7,17.6,0,24.3l108.4,108.4H17.1 C7.6,227.6,0,235.3,0,244.8z"></path> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </g> </g></svg>                <a class="zh"></a>
            </div>
        </div>
    </section>

    <div id="wrapper">
        <section id="list">
            
        </section>
    
        <section id="work">
            <div class="container">
                <div class="work-title" style="margin-bottom: 64px;">
                    <p id="main-title"></p>
                    <p class="subtitle" id="sub-title"></p>
                </div>

                <div class="work-content" id="work-content">
                    <!-- 作品内容会通过JavaScript动态加载 -->
                </div>
                
                <div class="work-intro">
                    <p class="work-type" id="work-type"></p>
                    <p class="work-date" id="work-date"></p>
                    <p class="work-purpose" id="work-purpose"></p>
                    <p><br></p>
                    <p class="work-description" id="work-description"></p>
                </div>

                <div class="contact-info">
                    <div class = "copyright">
                        <a class="eng">© <NAME>Chris W.</NAME></a>
                    </div>
                    <div class = "contact">
                        <p>Instagram
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="instagram">@sexy.robot</span>
                        </p>
                        <p>X
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="x">@ch_ri_s</span>
                        </p>
                        <p>LinkedIn
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="x">@Yixi(Chris) Wu</span>
                        </p>
                        <p>Rednote
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="red">@SLEEPNAKED</span>
                        </p>
                        <p>Email
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <span class="hyperlink" id="email">cwu14932@gmail.com</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="generateList.js"></script>

    <!-- loadWork -->
    <script>
        function loadWorkFromUrl() {
            const params = new URLSearchParams(window.location.search);
            const workId = params.get('work') || 'hill-making'; // 默认作品ID
            loadWork(workId);
        }

        function loadWork(workId) {
            const work = worksData.getWorkById(workId);
            if (!work) return;

            // 填充作品内容
            document.getElementById('main-title').innerHTML = work.title;
            document.getElementById('sub-title').innerHTML = work.subtitle;
            document.getElementById('work-type').textContent = work.type;
            document.getElementById('work-date').textContent = work.date;
            document.getElementById('work-purpose').innerHTML = `<span class="bold">${work.purpose}</span>`;
            document.getElementById('work-description').innerHTML = work.description;
            document.getElementById('work-content').innerHTML = work.content;

            // 更新URL
            history.pushState({workId}, '', `?work=${workId}`);

            // 更新列表中的当前项样式
            generateList();
        }

        // 页面加载时执行
        window.addEventListener('load', () => {
            loadWorkFromUrl();
            generateList();
        });

        // 处理浏览器前进后退
        window.addEventListener('popstate', () => {
            loadWorkFromUrl();
            generateList();
        });
    </script>

    <script src="navigater.js"></script>
    <script src="hyperlink.js"></script>

</body>
</html>